{% extends "base.html" %}
{% block content %}
<h1>Activities</h1>
<p><a href="{% url "activities:create" %}">New activity</a></p>
<h2>Filter</h2>
<form>
    {{ filter_form.as_p }}
    <button>{{_('Filter')}}</button>
</form>
{% if object_list %}
    <table class="activities-table">
        <thead>
            <th>{{_('Time')}}</th>
            <th>{{_('Project')}}</th>
            <th>{{_('Activity')}}</th>
            <th>{{_('Time spent')}}</th>
            <th>{{_('View')}}</th>
            <th>{{_('Edit')}}</th>
            <th>{{_('Delete')}}</th>
            <th>{{_('Stop')}}</th>
        </thead>
        <tbody>
        {% for activity in object_list %}
            {% ifchanged activity.start_date %}
            <tr class="activity-start-date">
                <td colspan="8">
                {{ activity.start_date }}
                </td>
            </tr>
            {% endifchanged %}
            <tr>
                <td>
                    {{ activity.start_time }}{% if activity.end_time %}- {{ activity.end_time }}{% endif %}
                </td>
                <td>{{ activity.project }}</td>
                <td>
                    {{ activity.activity }}
                </td>
                <td>{{ activity.get_duration_display }}</td>
                <td>
                    <a href="{{ activity.get_absolute_url }}">
                        {{_('View')}}
                    </a>
                </td>
                <td>
                    <a href="{% url 'activities:update' activity.pk %}">
                        {{_('Edit')}}
                    </a>
                </td>
                <td>
                    <form method="post" action="{% url 'activities:delete' activity.pk %}">
                        {% csrf_token %}
                        <button class="js-delete-button">{{_('Delete')}}</button>
                    </form>
                </td>
                <td>
                    {% if activity.is_active %}
                        <div>
                            <form method="post" action="{% url 'activities:stop' activity.pk %}">
                                {% csrf_token %}
                                <button>{{_('Stop')}}</button>
                            </form>
                        </div>
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
    </table>
{% else %}
    <p>{{_('No activities found.')}}</p>
{% endif %}

{% endblock %}
